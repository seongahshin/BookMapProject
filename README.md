# ë¶íŠ¸ë¦½

| ì•± ì´ë¦„ | ë¶íŠ¸ë¦½ |
| --- | --- |
| ì§„í–‰ ê¸°ê°„ | 2022ë…„ 9ì›” 13ì¼ ~ 2022ë…„ 9ì›” 29ì¼ (16ì¼) |
| ì•± ì†Œê°œ | ì§€ë„ë¥¼ í†µí•´ ê·¼ì²˜ ê°€ê¹Œìš´ ë…ë¦½ì„œì ì— ëŒ€í•œ ì •ë³´ë¥¼ ì°¾ê³  ë…ë¦½ì„œì ì— ëŒ€í•œ ë°©ë¬¸ê¸°ë¡ì„ ë‚ ì§œë³„ë¡œ ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì„ í†µí•´ ë…ë¦½ì„œì ì„ ì¢€ ë” ì¦ê²ê²Œ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ì•± |
|  ì•± ê¸°ëŠ¥ | ë…ë¦½ì„œì  ìœ„ì¹˜ ì •ë³´ ì œê³µ ê¸°ëŠ¥, ë…ë¦½ì„œì  ìƒì„¸ ì •ë³´ ì œê³µ ê¸°ëŠ¥, ë‚ ì§œë³„ ë…ë¦½ì„œì  ë°©ë¬¸ê¸°ë¡ ì €ì¥ ê¸°ëŠ¥, ë…ë¦½ì„œì  ë°©ë¬¸ê¸°ë¡ ê¸°ë°˜ í¬í† ì¹´ë“œ ìƒì„± ê¸°ëŠ¥, ë…ë¦½ì„œì  ë°©ë¬¸ ì‚¬ì§„ ì¸ìŠ¤íƒ€ê·¸ë¨ ê³µìœ  ê¸°ëŠ¥ |
| ë””ìì¸ íŒ¨í„´ | MVC |
| í™”ë©´ | UIKit, SnapKit, AutoLayout |
| ë°ì´í„°ë² ì´ìŠ¤ | Realm |
| ì„œë²„ | Firebase Analytics |
| ë¼ì´ë¸ŒëŸ¬ë¦¬ | Alamofire, FSCalendar, IQKeyboardManager, KingFisher, Mantis, SwiftyJSON, Toast, Mapkit |

### *âš’Â ì•± ìŠ¤í¬ë¦°ìƒ·*

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-12-16 á„‹á…©á„’á…® 7.04.29.png](%E1%84%87%E1%85%AE%E1%86%A8%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B8%205324ea33dab04791b7deff954c48b7c5/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2022-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_7.04.29.png)

### *ğŸ¯Â ê¸°ìˆ  ëª…ì„¸*

- `SnapKit`Â ì„ í™œìš©í•˜ì—¬ ì½”ë“œ ë² ì´ìŠ¤ë¡œÂ `Auto Layout`Â êµ¬í˜„
- `Decodable`Â ì„ ì´ìš©í•´ ë…ë¦½ì„œì Â `JSON`Â ë°ì´í„° ì„¤ê³„ ë° ì²˜ë¦¬
- `MapKit`Â ê³¼Â `CLLocation`Â ì„ ì´ìš©í•´ í˜„ì¬ ìœ„ì¹˜ì™€ ë…ë¦½ì„œì  Annotation í‘œì‹œ ê¸°ëŠ¥ êµ¬í˜„
- ì‚¬ìš©ìê°€ ì €ì¥í•œ ë…ë¦½ì„œì ì€Â `Realm`ì˜Â `Filter`Â ê¸°ëŠ¥ì„ í™œìš©í•´ ì €ì¥ëœ ë…ë¦½ì„œì ë§Œ Annotation í‘œì‹œ
- Naver Search APIë¥¼ `Singleton Pattern` ìœ¼ë¡œ ê´€ë¦¬í•˜ì—¬ ë©”ëª¨ë¦¬ ë‚­ë¹„ë¥¼ ë°©ì§€
- `FSCalendar`Â ë¥¼ ì´ìš©í•´ ìº˜ë¦°ë” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê³ Â `Realm`Â ì„ í™œìš©í•´Â `CRUD/ì •ë ¬ ê¸°ëŠ¥`Â êµ¬í˜„
- otf í°íŠ¸ë¥¼ `Fonts provided by application` ì— ì¶”ê°€í•˜ì—¬ ì•± ê¸°ë³¸ í°íŠ¸ ë³€ê²½
- `Queried URL Schemes` ì— instagram-stories ë¥¼ ì¶”ê°€í•˜ì—¬ UIView ë¥¼ png ë°ì´í„°ë¡œ ë³€ê²½í•˜ì—¬ ì¸ìŠ¤íƒ€ê·¸ë¨ ìŠ¤í† ë¦¬ì— ë…ë¦½ì„œì  ë°©ë¬¸ ì‚¬ì§„ì„ ê³µìœ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ êµ¬í˜„
- `UIGraphicsImageRenderer`Â ë¥¼ í†µí•´Â `FileManager`Â ì˜Â `Document`Â ì— ì €ì¥ë˜ëŠ” ì´ë¯¸ì§€ ìš©ëŸ‰ ì²˜ë¦¬
- `Firebase Cloud Messaging`Â ì„ ì „ì†¡í•˜ì—¬ ì•±ì˜ ìœ ì…ë¥ ì„ ë†’ì„
- `Firebase Analytics`Â ì„ í†µí•´ ì‚¬ìš©ìê°€ ì˜¤ë˜ ë¨¸ë¬´ëŠ” Event ë¶„ì„

### *ğŸ‘©ğŸ»â€ğŸ’» íŠ¸ëŸ¬ë¸” ìŠˆíŒ…*

1. ì™¸ë¶€ APIë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë…ë¦½ì„œì  ì •ë³´ë¥¼ ë‹´ì€ ë°ì´í„°ë¥¼ ì§ì ‘ ì„¤ê³„í•´ì•¼ í•˜ëŠ” ì´ìŠˆ

 ğŸ§·Â  ë¬¸ì œ

JSON ë°ì´í„°ì— ë‹´ì•„ì•¼ í•˜ëŠ” ë…ë¦½ì„œì  ì •ë³´ê°€ ë‹´ê¸´ ì™¸ë¶€ API ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ ì§ì ‘ ë°ì´í„°ë¥¼ ì„¤ê³„í•  í•„ìš”ì„±ì„ ëŠê¼ˆë‹¤. 

ğŸ¨Â í•´ê²° 

JSON í˜•íƒœì˜ ë°ì´í„°ë¥¼ BookData êµ¬ì¡°ì²´ì— íŒŒì‹±ì„ í•˜ëŠ” Decodingì„ ì‹¤í–‰í•œ í›„, return ëœ value ê°’ì„ BookStoreListì— ì¶”ê°€í•˜ì—¬ ê° ë…ë¦½ì„œì ì˜ ì •ë³´ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.  

```swift
class Data {
    
    struct BookStore: Codable {
        let location: String
        let latitude: Double
        let longitude: Double
        let address: String
        let time: String
        let link: String
    }
    
    
    func decode() -> [BookStore] {
        var BookStoreList: [BookStore] = []
        let jsonData = """
        [
            {
            "storeName": "ìŠ¤í˜ì¸ì±…ë°©",
            "address": "ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘êµ¬ í‡´ê³„ë¡œ36ê¸¸ 29 ê¸°ë‚¨ë¹Œë”© 5ì¸µ 603í˜¸",
            "link": "http://www.spainbookshop.com",
            "mapX": 37.560543,
            "mapY": 126.995058,
            "time": "ì›”-ê¸ˆ 14:00-20:00 í†  13:00-18:00 (íœ´ë¬´:ì¼)"
            },
            {
            "storeName": "ìµœì¸ì•„ì±…ë°©",
            "address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì„ ë¦‰ë¡œ 521",
            "link": "http://instagram.com/inabooks",
            "mapX": 37.506026,
            "mapY": 127.047922,
            "time": "ë§¤ì¼ 12:00-19:00"
            },
            {
            "storeName": "ì´í›„ë¶ìŠ¤",
            "address": "ì„œìš¸íŠ¹ë³„ì‹œ ë§ˆí¬êµ¬ ë§ì›ë¡œ4ê¸¸ 24 2ì¸µ",
            "link": "http://www.afterbookshop.com",
            "mapX": 37.555602,
            "mapY": 126.901935,
            "time": "ì¼-í™” 13:00-18:00 ìˆ˜-í†  11:00-20:00"
            }
            // ìƒëµ
        ]
        """

        struct BookData: Decodable {
            var storeName: String
            var address: String
            var link: String
            var mapX: Double
            var mapY: Double
            var time: String
        }
        
        guard let data = jsonData.data(using: .utf8) else {
            fatalError()
        }
        
        
        do {
            let value = try JSONDecoder().decode([BookData].self, from: data)
            
            for num in 0...value.count - 1 {
    
                BookStoreList.append(BookStore(location: value[num].storeName, latitude: value[num].mapX, longitude: value[num].mapY, address: value[num].address, time: value[num].time, link: value[num].link))
            }
            
            
        } catch {
            print(error)
        }
        return BookStoreList
    }
    
}
```

2. ì¹´ë©”ë¼ ë° ì•¨ë²”ì˜ ì‚¬ì§„ì„ DBì— ì €ì¥í•  ë•Œì˜ íŒŒì¼ í¬ê¸° ì´ìŠˆ 

ğŸ§·Â  ë¬¸ì œ

DBì— ì´ë¯¸ì§€ë¥¼ ì§ì ‘ ì €ì¥í•˜ê²Œ ë˜ë©´ íŒŒì¼ ìš©ëŸ‰ì´ ì ì  ëŠ˜ì–´ë‚˜ ì•±ì´ ë¬´ê±°ì›Œì§„ë‹¤.

ğŸ¨Â í•´ê²°

DBì—ëŠ” ì´ë¯¸ì§€ íŒŒì¼ëª…ë§Œ String íƒ€ì…ìœ¼ë¡œ ì €ì¥í•˜ê³  ì‹¤ì œ ì´ë¯¸ì§€ëŠ” FileManagerì˜ DocumentDirectoryì— ì €ì¥í•˜ì—¬ ì´ìŠˆë¥¼ í•´ê²°í•˜ì˜€ë‹¤. 

```swift
func saveImageToDocumentDirectory(imageName: String, image: UIImage) {
       
        guard let documentDirectory = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).first else { return }
        
        let imageURL = documentDirectory.appendingPathComponent(imageName)
        
        guard let data = image.resizeImage(newWidth: 140).pngData() else {
            return
        }
     
        if FileManager.default.fileExists(atPath: imageURL.path) {
          
            do {
                try FileManager.default.removeItem(at: imageURL)
                print("ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ")
            } catch {
                print("ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤")
            }
        }
        
        do {
            try data.write(to: imageURL)
            print("ì´ë¯¸ì§€ ì €ì¥")
        }
        catch {
          print("Something went wrong")
        }
        
    }
```

3. ì‹¤ì‹œê°„ ìœ„ì¹˜ë¥¼ í´ë¦­í–ˆì„ ë•Œ ì•±ì´ êº¼ì§€ëŠ” ì´ìŠˆ 

ğŸ§·Â  ë¬¸ì œ

ì‹¤ì‹œê°„ ìœ„ì¹˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” Annotationì„ í´ë¦­í–ˆì„ ë•Œ ì•±ì´ êº¼ì§€ëŠ” í˜„ìƒì´ ë‚˜íƒ€ë‚¬ë‹¤. 

ğŸ¨Â í•´ê²°

as? ëŠ” "ëŸ°íƒ€ì„ ì‹œì "ì— ë‹¤ìš´ ìºìŠ¤íŒ…ì„ í•˜ê³  ì‹¤íŒ¨í•  ê²½ìš° nilì„ return í•˜ì§€ë§Œ, as!ëŠ” "ëŸ°íƒ€ì„ ì‹œì "ì— ë‹¤ìš´ ìºìŠ¤íŒ…ì„ í•˜ê³  ì‹¤íŒ¨í•  ê²½ìš° ì—ëŸ¬ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì•±ì´ êº¼ì§€ëŠ” ê²ƒì´ì—ˆë‹¤. ê·¸ë˜ì„œ ì´ ë¶€ë¶„ì€ ì•ˆì „í•˜ê²Œ guard let ìœ¼ë¡œ ì˜µì…”ë„ ë°”ì¸ë”© ì²˜ë¦¬ë¥¼ í•´ì£¼ê³  as! ê°€ ì•„ë‹Œ as?ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨, ì˜¤ë¥˜ê°€ í•´ê²°ë˜ì—ˆë‹¤.

```swift
guard let ann = view.annotation as? MKPointAnnotation else { return }
```

4. íš¨ìœ¨ì ì¸ API ê´€ë¦¬

ğŸ§·Â  ë¬¸ì œ

API ê°€ ì—¬ëŸ¬ë²ˆ í˜¸ì¶œë˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ê³ ë¯¼í•´ì•¼ í–ˆë‹¤. 

ğŸ¨Â í•´ê²°

ì‹±í´í†¤ íŒ¨í„´ì€ ë‹¤ë¥¸ í´ë˜ìŠ¤ë“¤ê³¼ ìì›ê³µìœ ê°€ ì‰½ê³  í•œ ë²ˆì— í•œ ì¸ìŠ¤í„´ìŠ¤ë§Œ ìƒì„±í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ë‚­ë¹„ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— íš¨ìœ¨ì ì¸ API ê´€ë¦¬ë¥¼ ìœ„í•´ ì‹±í´í†¤ íŒ¨í„´ì„ ì„ íƒí–ˆë‹¤. 

 

```swift
class APIManager {
    
    static let shared = APIManager()
    
    private init() { }
    
    func searchImage(query: String, completionHandler: @escaping ([String]) -> ()) {
        
        let urlString = "\(EndPoint.imageSearchURL)ë…ë¦½ì„œì \(query)&display=6&start=1&sort=sim"
        let headers: HTTPHeaders = ["X-Naver-Client-Id": APIKey.clientID, "X-Naver-Client-Secret": APIKey.clientSecret]
        let encodedString = urlString.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed)!
        let url = URL(string: encodedString)!
        
        AF.request(url, method: .get, headers: headers).validate().responseData { response in
                switch response.result {
                    
                        case .success(let value):
                            let json = JSON(value)
                            let data = json["items"]
                            var imageList: [String] = []
                    
                            if data.count >= 6 {
                                for num in 0...5 {
                                    let value = data[num]["link"].stringValue
                                    imageList.append(value)
                                }
                            } else {
                                if data.count == 0 {
                                    
                                } else {
                                    for num in 0...data.count - 1{
                                        let value = data[num]["link"].stringValue
                                        imageList.append(value)
                                    }
                                }
                            }
                    
                    completionHandler(imageList)
                            

                        case .failure(let error):
                            print(error)
                        }
                    }
        
        
    
    }
}
```

5. 1ë²ˆì˜ ë¦¬ì  ì´ìŠˆ 

ğŸ§·Â  ë¬¸ì œ 

ê¶Œí•œ í—ˆìš© ë¬¸êµ¬ê°€ êµ¬ì²´ì ì´ì§€ ì•Šì•„ ë¦¬ì ì„ ë‹¹í–ˆë‹¤. 

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-01-11 á„‹á…©á„Œá…¥á†« 11.55.45.png](%E1%84%87%E1%85%AE%E1%86%A8%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B8%205324ea33dab04791b7deff954c48b7c5/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-01-11_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_11.55.45.png)

ğŸ¨Â í•´ê²°

ê·¸ë˜ì„œ ì¢€ ë” êµ¬ì²´ì ì´ê³  ìƒì„¸í•˜ê²Œ ê¶Œí•œ í—ˆìš© ë¬¸êµ¬ë¥¼ ì‘ì„±í•˜ì—¬ ì‹¬ì‚¬ì— í†µê³¼í•  ìˆ˜ ìˆì—ˆë‹¤.
